const RegionStore = require('../../stores/map/region');

class RegionController {
    constructor() {
        this.regionStore = new RegionStore();
    }

    /**
     * @api {get} /api/map/regions Get all regions
     * @apiVersion 0.0.2
     * @apiName GetAllRegionsMap
     * @apiGroup RegionsMap
     *
     * @apiSuccessExample {json} Success-Response
     *     HTTP/1.1 200 OK
     *     {"message":"Success","data":[{"neighbors":[],"cultures":[],"events":[],"borders":[["84.99013259851141","-98.69138835608068"],["84.99013259851141","-141.98102083028493"],["84.78666878252469","-141.38368012244283"],["84.72242199393571","-141.31340474504964"],["84.62456853356329","-140.68092634851092"],["84.58160553025975","-140.89175248069049"],["84.53495474027507","-141.629643943319"],["84.51147939980001","-141.73505700940876"],["84.4845273171918","-142.29726002855426"],["84.41656847022935","-142.82432535900318"],["84.29911743314992","-142.43781078334067"],["84.24299743638123","-142.4026730946441"],["84.21473130658975","-142.29726002855426"],["84.18632686807693","-142.43781078334067"],["84.1434594155369","-142.92973842509298"],["84.12190771602475","-143.03515149118277"],["84.09666416205852","-142.75404998161002"],["84.01295802781846","-142.89460073639637"],["83.96142855051693","-142.2269846511611"],["83.97250765072073","-141.48909318853262"],["83.89452659565131","-140.04844795197224"],["83.80796516345185","-139.52138262152332"],["83.74320026593453","-139.41596955543355"],["83.68549470714291","-138.71321578150165"],["83.7508545500089","-137.34284592233448"],["83.70093448416344","-137.06174441276173"],["83.73936962283928","-134.7426569587865"],["83.74702857452253","-133.44256247701253"],["83.69707806848272","-134.1453162509444"],["83.67389014458905","-134.2155916283376"],["83.6389488660296","-134.28586700573078"],["83.5566699870391","-134.1453162509444"],["83.4972513382751","-133.65338860919206"],["83.4693362303176","-133.4074247883159"],["83.52900886430835","-133.05604790134996"],["83.45333120326761","-132.84522176917042"],["83.45733611758644","-132.42356950481127"],["83.60381539273033","-132.2127433726317"],["83.57242344624756","-132.00191724045214"],["83.40104466774291","-131.755953419576"],["83.23340241725258","-128.76924988036544"],["83.13751013945767","-128.62869912557906"],["83.07424429314723","-128.10163379513014"],["83.03174494989179","-127.60970615337784"],["82.93733076093581","-126.09878553942427"],["82.94596620631152","-125.57172020897536"],["82.89834091768151","-125.36089407679582"],["82.87222879570888","-124.7635533689537"],["83.10805797157406","-123.35804582108992"],["83.07424429314723","-122.9715312454274"],["83.08694372604921","-122.51474129237165"],["83.14170735430292","-121.49574832017042"],["83.2458113797598","-121.42547294277722"],["83.44932384813342","-119.7037261966441"],["83.42925040882434","-119.1415231774986"],["83.67001723906752","-118.22794327138716"],["83.7508545500089","-116.50619652525403"],["83.89078824446439","-116.29537039307448"],["83.85327908964652","-114.99527591130045"],["83.88704761298986","-114.11683369388562"],["83.8570403056783","-113.30866685386394"],["83.83066356948697","-113.02756534429116"],["83.84951557954159","-112.04371006078657"],["83.77376148640596","-110.84902864510234"],["83.73170132750033","-109.65434722941812"],["83.68162887720676","-110.21655024856362"],["83.64284070237214","-110.18141255986704"],["83.69321930136337","-111.657195485124"],["83.65450198905933","-112.2193985042695"],["83.59598174879652","-113.62490605213328"],["83.50520523899532","-113.87086987300945"],["83.41717696137523","-115.03041359999705"],["83.35241125094487","-114.50334826954816"],["83.35647762798611","-114.15197138258222"],["83.19187509396933","-111.86802161730357"],["83.22097076297678","-111.1652678433717"],["83.19187509396933","-110.70847789031595"],["83.2002008018881","-110.3922386920466"],["83.16265513682582","-110.00572411638407"],["83.1710164089457","-108.70562963461008"],["83.12910803916355","-107.82718741719522"],["83.24167757770931","-104.66479543450174"],["83.6389488660296","-100.13203359264108"],["83.6389488660296","-100.13203359264108"],["83.7278636724413","-99.8157943943717"],["83.7508545500089","-84.39034905656678"],["83.65450198905933","-84.00383448090425"],["83.74320026593453","-82.21181235737794"],["83.8003805571669","-81.89557315910858"],["83.79278669684872","-81.54419627214266"],["83.87206225670495","-81.1576816964801"],["84.03125504035611","-81.2279570738733"],["84.12550514637024","-80.5954786773346"],["84.1111022481278","-80.24410179036866"],["84.05677729308373","-80.17382641297549"],["84.05313792540956","-79.8575872147061"],["84.12190771602475","-79.33052188425721"],["84.20764318951242","-79.3656595729538"],["84.2253472774422","-79.22510881816743"],["84.30957906914766","-79.50621032774018"],["84.3857152826147","-79.26024650686402"],["84.49464977568672","-79.75217414861632"],["84.56831739490903","-79.43593495034699"],["84.58823743871145","-79.9278625920993"],["84.65738572440452","-80.10355103558229"],["84.64428288853026","-80.560340988638"],["84.67698007075235","-81.2279570738733"],["84.68675035618838","-81.36850782865967"],["84.68675035618838","-81.54419627214266"],["84.57164247161897","-81.1576816964801"],["84.39601851518428","-81.08740631908691"],["84.3857152826147","-81.40364551735628"],["84.32349815757718","-81.82529778171539"],["84.34431318644491","-82.17667466868134"],["84.35814758924154","-82.5280515556473"],["84.40972684527735","-82.98484150870301"],["84.48790352992955","-82.98484150870301"],["84.49464977568672","-83.33621839566895"],["84.43704330584036","-83.51190683915193"],["84.30260677340208","-84.67145056613955"],["84.30957906914766","-85.23365358528505"],["84.33044497079014","-85.44447971746462"],["84.29562596292983","-86.00668273661013"],["84.30957906914766","-87.65815410535006"],["84.33044497079014","-87.93925561492281"],["84.33738331033453","-88.64200938885469"],["84.34431318644491","-87.9041179262262"],["84.41314870170862","-87.65815410535006"],["84.50811758317923","-88.009530992316"],["84.59155035742046","-89.55558929496617"],["84.66719187101127","-90.32861844629123"],["84.68349558284716","-90.82054608804354"],["84.78347504609921","-91.94495212633458"],["84.79305040679704","-93.17477123071538"],["84.84066492528895","-94.08835113682683"],["84.82801034240573","-94.96679335424167"],["84.82167144789209","-95.42358330729742"],["84.84382374322566","-96.1966124586225"],["84.88784520352738","-96.82909085516117"],["84.94079619608392","-97.14533005343053"],["84.9655246766298","-97.3912938743067"],["84.9870631813666","-97.84808382736243"],["84.98399188847254","-98.16432302563179"]],"highlights":[],"_id":"5cad97c6b0c0ef00108e57c0","name":"The Lands of Always Winter","color":"white","__v":0}, {..}, ..]}
     * @apiSuccessExample {json} Empty-Success-Response
     *     HTTP/1.1 200 OK
     *     {"message":"Success","data":[]}
     * @apiErrorExample {json} NoData
     *      HTTP/1.1 404
     *      getAll(): Region collection empty. Scraping should be started...
     * @apiErrorExample {json} ErrorInDatabase
     *      HTTP/1.1 404
     *      error in database query! - err
     * @apiDescription Return all regions currently stored.
     */
    async getAll(req, res) {
        let result = await this.regionStore.getAll();
        if(result.success === STORE_RESPONSE_SUCCESS) {
            res.status(200).send({
                'message': 'Success',
                'data': result.data
            });
        } else {
            res.status(404).send({'message': result.message});
        }
    }

    /**
     * @api {get} /api/map/regions/:name Get regions by name
     * @apiVersion 0.0.2
     * @apiName GetRegionsByNameMap
     * @apiGroup RegionsMap
     *
     * @apiSuccessExample {json} Success-Response
     *     HTTP/1.1 200 OK
     *     {"message":"Success","data":{"neighbors":[],"cultures":[],"events":[],"borders":[["84.99013259851141","-98.69138835608068"],["84.99013259851141","-141.98102083028493"],["84.78666878252469","-141.38368012244283"],["84.72242199393571","-141.31340474504964"],["84.62456853356329","-140.68092634851092"],["84.58160553025975","-140.89175248069049"],["84.53495474027507","-141.629643943319"],["84.51147939980001","-141.73505700940876"],["84.4845273171918","-142.29726002855426"],["84.41656847022935","-142.82432535900318"],["84.29911743314992","-142.43781078334067"],["84.24299743638123","-142.4026730946441"],["84.21473130658975","-142.29726002855426"],["84.18632686807693","-142.43781078334067"],["84.1434594155369","-142.92973842509298"],["84.12190771602475","-143.03515149118277"],["84.09666416205852","-142.75404998161002"],["84.01295802781846","-142.89460073639637"],["83.96142855051693","-142.2269846511611"],["83.97250765072073","-141.48909318853262"],["83.89452659565131","-140.04844795197224"],["83.80796516345185","-139.52138262152332"],["83.74320026593453","-139.41596955543355"],["83.68549470714291","-138.71321578150165"],["83.7508545500089","-137.34284592233448"],["83.70093448416344","-137.06174441276173"],["83.73936962283928","-134.7426569587865"],["83.74702857452253","-133.44256247701253"],["83.69707806848272","-134.1453162509444"],["83.67389014458905","-134.2155916283376"],["83.6389488660296","-134.28586700573078"],["83.5566699870391","-134.1453162509444"],["83.4972513382751","-133.65338860919206"],["83.4693362303176","-133.4074247883159"],["83.52900886430835","-133.05604790134996"],["83.45333120326761","-132.84522176917042"],["83.45733611758644","-132.42356950481127"],["83.60381539273033","-132.2127433726317"],["83.57242344624756","-132.00191724045214"],["83.40104466774291","-131.755953419576"],["83.23340241725258","-128.76924988036544"],["83.13751013945767","-128.62869912557906"],["83.07424429314723","-128.10163379513014"],["83.03174494989179","-127.60970615337784"],["82.93733076093581","-126.09878553942427"],["82.94596620631152","-125.57172020897536"],["82.89834091768151","-125.36089407679582"],["82.87222879570888","-124.7635533689537"],["83.10805797157406","-123.35804582108992"],["83.07424429314723","-122.9715312454274"],["83.08694372604921","-122.51474129237165"],["83.14170735430292","-121.49574832017042"],["83.2458113797598","-121.42547294277722"],["83.44932384813342","-119.7037261966441"],["83.42925040882434","-119.1415231774986"],["83.67001723906752","-118.22794327138716"],["83.7508545500089","-116.50619652525403"],["83.89078824446439","-116.29537039307448"],["83.85327908964652","-114.99527591130045"],["83.88704761298986","-114.11683369388562"],["83.8570403056783","-113.30866685386394"],["83.83066356948697","-113.02756534429116"],["83.84951557954159","-112.04371006078657"],["83.77376148640596","-110.84902864510234"],["83.73170132750033","-109.65434722941812"],["83.68162887720676","-110.21655024856362"],["83.64284070237214","-110.18141255986704"],["83.69321930136337","-111.657195485124"],["83.65450198905933","-112.2193985042695"],["83.59598174879652","-113.62490605213328"],["83.50520523899532","-113.87086987300945"],["83.41717696137523","-115.03041359999705"],["83.35241125094487","-114.50334826954816"],["83.35647762798611","-114.15197138258222"],["83.19187509396933","-111.86802161730357"],["83.22097076297678","-111.1652678433717"],["83.19187509396933","-110.70847789031595"],["83.2002008018881","-110.3922386920466"],["83.16265513682582","-110.00572411638407"],["83.1710164089457","-108.70562963461008"],["83.12910803916355","-107.82718741719522"],["83.24167757770931","-104.66479543450174"],["83.6389488660296","-100.13203359264108"],["83.6389488660296","-100.13203359264108"],["83.7278636724413","-99.8157943943717"],["83.7508545500089","-84.39034905656678"],["83.65450198905933","-84.00383448090425"],["83.74320026593453","-82.21181235737794"],["83.8003805571669","-81.89557315910858"],["83.79278669684872","-81.54419627214266"],["83.87206225670495","-81.1576816964801"],["84.03125504035611","-81.2279570738733"],["84.12550514637024","-80.5954786773346"],["84.1111022481278","-80.24410179036866"],["84.05677729308373","-80.17382641297549"],["84.05313792540956","-79.8575872147061"],["84.12190771602475","-79.33052188425721"],["84.20764318951242","-79.3656595729538"],["84.2253472774422","-79.22510881816743"],["84.30957906914766","-79.50621032774018"],["84.3857152826147","-79.26024650686402"],["84.49464977568672","-79.75217414861632"],["84.56831739490903","-79.43593495034699"],["84.58823743871145","-79.9278625920993"],["84.65738572440452","-80.10355103558229"],["84.64428288853026","-80.560340988638"],["84.67698007075235","-81.2279570738733"],["84.68675035618838","-81.36850782865967"],["84.68675035618838","-81.54419627214266"],["84.57164247161897","-81.1576816964801"],["84.39601851518428","-81.08740631908691"],["84.3857152826147","-81.40364551735628"],["84.32349815757718","-81.82529778171539"],["84.34431318644491","-82.17667466868134"],["84.35814758924154","-82.5280515556473"],["84.40972684527735","-82.98484150870301"],["84.48790352992955","-82.98484150870301"],["84.49464977568672","-83.33621839566895"],["84.43704330584036","-83.51190683915193"],["84.30260677340208","-84.67145056613955"],["84.30957906914766","-85.23365358528505"],["84.33044497079014","-85.44447971746462"],["84.29562596292983","-86.00668273661013"],["84.30957906914766","-87.65815410535006"],["84.33044497079014","-87.93925561492281"],["84.33738331033453","-88.64200938885469"],["84.34431318644491","-87.9041179262262"],["84.41314870170862","-87.65815410535006"],["84.50811758317923","-88.009530992316"],["84.59155035742046","-89.55558929496617"],["84.66719187101127","-90.32861844629123"],["84.68349558284716","-90.82054608804354"],["84.78347504609921","-91.94495212633458"],["84.79305040679704","-93.17477123071538"],["84.84066492528895","-94.08835113682683"],["84.82801034240573","-94.96679335424167"],["84.82167144789209","-95.42358330729742"],["84.84382374322566","-96.1966124586225"],["84.88784520352738","-96.82909085516117"],["84.94079619608392","-97.14533005343053"],["84.9655246766298","-97.3912938743067"],["84.9870631813666","-97.84808382736243"],["84.98399188847254","-98.16432302563179"]],"highlights":[],"_id":"5cad97c6b0c0ef00108e57c0","name":"The Lands of Always Winter","color":"white","__v":0}}
     * @apiSuccessExample {json} Empty-Success-Response
     *     HTTP/1.1 200 OK
     *     {"message":"Success","data":[]}
     * @apiErrorExample {json} NoData
     *      HTTP/1.1 404
     *      getByName(name): Region collection empty. Scraping should be started...
     * @apiErrorExample {json} ErrorInDatabase
     *      HTTP/1.1 404
     *      error in database query! - err
     * @apiDescription Return regions named :name.
     */
    async getByName(req, res) {
        let result = await this.regionStore.getByName(req.params.name);
        if(result.success === STORE_RESPONSE_SUCCESS) {
            res.status(200).send({
                'message': 'Success',
                'data': result.data
            });
        } else {
            res.status(404).send({'message': result.message});
        }
    }

    /**
     * @api {get} /api/map/regions/byId/:id Get regions by id
     * @apiVersion 0.0.2
     * @apiName GetRegionsByIdMap
     * @apiGroup RegionsMap
     *
     * @apiSuccessExample {json} Success-Response
     *     HTTP/1.1 200 OK
     *     {"message":"Success","data":{"neighbors":[],"cultures":[],"events":[],"borders":[["84.99013259851141","-98.69138835608068"],["84.99013259851141","-141.98102083028493"],["84.78666878252469","-141.38368012244283"],["84.72242199393571","-141.31340474504964"],["84.62456853356329","-140.68092634851092"],["84.58160553025975","-140.89175248069049"],["84.53495474027507","-141.629643943319"],["84.51147939980001","-141.73505700940876"],["84.4845273171918","-142.29726002855426"],["84.41656847022935","-142.82432535900318"],["84.29911743314992","-142.43781078334067"],["84.24299743638123","-142.4026730946441"],["84.21473130658975","-142.29726002855426"],["84.18632686807693","-142.43781078334067"],["84.1434594155369","-142.92973842509298"],["84.12190771602475","-143.03515149118277"],["84.09666416205852","-142.75404998161002"],["84.01295802781846","-142.89460073639637"],["83.96142855051693","-142.2269846511611"],["83.97250765072073","-141.48909318853262"],["83.89452659565131","-140.04844795197224"],["83.80796516345185","-139.52138262152332"],["83.74320026593453","-139.41596955543355"],["83.68549470714291","-138.71321578150165"],["83.7508545500089","-137.34284592233448"],["83.70093448416344","-137.06174441276173"],["83.73936962283928","-134.7426569587865"],["83.74702857452253","-133.44256247701253"],["83.69707806848272","-134.1453162509444"],["83.67389014458905","-134.2155916283376"],["83.6389488660296","-134.28586700573078"],["83.5566699870391","-134.1453162509444"],["83.4972513382751","-133.65338860919206"],["83.4693362303176","-133.4074247883159"],["83.52900886430835","-133.05604790134996"],["83.45333120326761","-132.84522176917042"],["83.45733611758644","-132.42356950481127"],["83.60381539273033","-132.2127433726317"],["83.57242344624756","-132.00191724045214"],["83.40104466774291","-131.755953419576"],["83.23340241725258","-128.76924988036544"],["83.13751013945767","-128.62869912557906"],["83.07424429314723","-128.10163379513014"],["83.03174494989179","-127.60970615337784"],["82.93733076093581","-126.09878553942427"],["82.94596620631152","-125.57172020897536"],["82.89834091768151","-125.36089407679582"],["82.87222879570888","-124.7635533689537"],["83.10805797157406","-123.35804582108992"],["83.07424429314723","-122.9715312454274"],["83.08694372604921","-122.51474129237165"],["83.14170735430292","-121.49574832017042"],["83.2458113797598","-121.42547294277722"],["83.44932384813342","-119.7037261966441"],["83.42925040882434","-119.1415231774986"],["83.67001723906752","-118.22794327138716"],["83.7508545500089","-116.50619652525403"],["83.89078824446439","-116.29537039307448"],["83.85327908964652","-114.99527591130045"],["83.88704761298986","-114.11683369388562"],["83.8570403056783","-113.30866685386394"],["83.83066356948697","-113.02756534429116"],["83.84951557954159","-112.04371006078657"],["83.77376148640596","-110.84902864510234"],["83.73170132750033","-109.65434722941812"],["83.68162887720676","-110.21655024856362"],["83.64284070237214","-110.18141255986704"],["83.69321930136337","-111.657195485124"],["83.65450198905933","-112.2193985042695"],["83.59598174879652","-113.62490605213328"],["83.50520523899532","-113.87086987300945"],["83.41717696137523","-115.03041359999705"],["83.35241125094487","-114.50334826954816"],["83.35647762798611","-114.15197138258222"],["83.19187509396933","-111.86802161730357"],["83.22097076297678","-111.1652678433717"],["83.19187509396933","-110.70847789031595"],["83.2002008018881","-110.3922386920466"],["83.16265513682582","-110.00572411638407"],["83.1710164089457","-108.70562963461008"],["83.12910803916355","-107.82718741719522"],["83.24167757770931","-104.66479543450174"],["83.6389488660296","-100.13203359264108"],["83.6389488660296","-100.13203359264108"],["83.7278636724413","-99.8157943943717"],["83.7508545500089","-84.39034905656678"],["83.65450198905933","-84.00383448090425"],["83.74320026593453","-82.21181235737794"],["83.8003805571669","-81.89557315910858"],["83.79278669684872","-81.54419627214266"],["83.87206225670495","-81.1576816964801"],["84.03125504035611","-81.2279570738733"],["84.12550514637024","-80.5954786773346"],["84.1111022481278","-80.24410179036866"],["84.05677729308373","-80.17382641297549"],["84.05313792540956","-79.8575872147061"],["84.12190771602475","-79.33052188425721"],["84.20764318951242","-79.3656595729538"],["84.2253472774422","-79.22510881816743"],["84.30957906914766","-79.50621032774018"],["84.3857152826147","-79.26024650686402"],["84.49464977568672","-79.75217414861632"],["84.56831739490903","-79.43593495034699"],["84.58823743871145","-79.9278625920993"],["84.65738572440452","-80.10355103558229"],["84.64428288853026","-80.560340988638"],["84.67698007075235","-81.2279570738733"],["84.68675035618838","-81.36850782865967"],["84.68675035618838","-81.54419627214266"],["84.57164247161897","-81.1576816964801"],["84.39601851518428","-81.08740631908691"],["84.3857152826147","-81.40364551735628"],["84.32349815757718","-81.82529778171539"],["84.34431318644491","-82.17667466868134"],["84.35814758924154","-82.5280515556473"],["84.40972684527735","-82.98484150870301"],["84.48790352992955","-82.98484150870301"],["84.49464977568672","-83.33621839566895"],["84.43704330584036","-83.51190683915193"],["84.30260677340208","-84.67145056613955"],["84.30957906914766","-85.23365358528505"],["84.33044497079014","-85.44447971746462"],["84.29562596292983","-86.00668273661013"],["84.30957906914766","-87.65815410535006"],["84.33044497079014","-87.93925561492281"],["84.33738331033453","-88.64200938885469"],["84.34431318644491","-87.9041179262262"],["84.41314870170862","-87.65815410535006"],["84.50811758317923","-88.009530992316"],["84.59155035742046","-89.55558929496617"],["84.66719187101127","-90.32861844629123"],["84.68349558284716","-90.82054608804354"],["84.78347504609921","-91.94495212633458"],["84.79305040679704","-93.17477123071538"],["84.84066492528895","-94.08835113682683"],["84.82801034240573","-94.96679335424167"],["84.82167144789209","-95.42358330729742"],["84.84382374322566","-96.1966124586225"],["84.88784520352738","-96.82909085516117"],["84.94079619608392","-97.14533005343053"],["84.9655246766298","-97.3912938743067"],["84.9870631813666","-97.84808382736243"],["84.98399188847254","-98.16432302563179"]],"highlights":[],"_id":"5cad97c6b0c0ef00108e57c0","name":"The Lands of Always Winter","color":"white","__v":0}}
     * @apiSuccessExample {json} Empty-Success-Response
     *     HTTP/1.1 200 OK
     *     {"message":"Success","data":[]}
     * @apiErrorExample {json} NoData
     *      HTTP/1.1 404
     *      getById(id): Region collection empty. Scraping should be started...
     * @apiErrorExample {json} ErrorInDatabase
     *      HTTP/1.1 404
     *      error in database query! - err
     * @apiDescription Return regions with id :id.
     */
    async getById(req, res) {
        let result = await this.regionStore.getById(req.params.id);
        if(result.success === STORE_RESPONSE_SUCCESS) {
            res.status(200).send({
                'message': 'Success',
                'data': result.data
            });
        } else {
            res.status(404).send({'message': result.message});
        }
    }
}

module.exports = RegionController;